<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Min Todo</title>
  <style>
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:linear-gradient(to top,#ff0000,#ffffff);
      background-attachment:fixed;
      color:#0b0b0b
    }
    .page{min-height:100%;display:flex;align-items:center;justify-content:center;padding:24px}
    .card{width:100%;max-width:520px;border-radius:16px;overflow:hidden;opacity:0;transform:translateY(-120vh) scale(.98)}
    .card.show{animation:drop .8s cubic-bezier(.16,1,.3,1) forwards}
    @keyframes drop{
      0%{opacity:0;transform:translateY(-120vh) scale(.98)}
      70%{opacity:1;transform:translateY(8px) scale(1)}
      100%{opacity:1;transform:translateY(0) scale(1)}
    }
    .panel{background:#ffffffcc;backdrop-filter:saturate(120%) blur(6px);border-radius:16px;border:1px solid #00000014;box-shadow:0 10px 30px #00000033}
    .header{padding:18px 20px 10px}
    .title{margin:0;font-size:22px;font-weight:700}
    .sub{margin:6px 0 0;font-size:13px;color:#333}
    .row{display:flex;gap:8px;align-items:flex-start;padding:14px 16px}
    .input{flex:1;border-radius:10px;border:1px solid #00000022;padding:12px 14px;background:#fff;color:#0b0b0b;outline:none;font-size:15px}
    .input:focus{border-color:#ff4d4d;box-shadow:0 0 0 2px #ff4d4d55}
    .btn{background:#ff4d4d;color:#fff;border:none;padding:12px 14px;border-radius:10px;font-weight:600;cursor:pointer}
    .btn:active{transform:scale(.98)}
    .error{margin:4px 16px 0;font-size:13px;color:#c30000;opacity:0;height:0;overflow:hidden}
    .error.show{opacity:1;height:auto}
    .input.blink{animation:blink .5s ease-in-out 1}
    @keyframes blink{0%{box-shadow:0 0 0 0 #ff7a7a;border-color:#ff7a7a}50%{box-shadow:0 0 0 3px #ff7a7a66}100%{box-shadow:0 0 0 0 transparent}}
    .stats{display:flex;justify-content:space-between;align-items:center;color:#333;font-size:12px;padding:0 16px 10px}
    .clear{font-size:12px;color:#111;background:transparent;border:none;text-decoration:underline;text-underline-offset:2px;cursor:pointer}
    .list{padding:0;margin:0;list-style:none;border-top:1px solid #00000010}
    .item{display:flex;align-items:center;gap:10px;padding:12px 14px;border-bottom:1px solid #00000010;user-select:none;cursor:pointer;transition:background .2s}
    .item:hover{background:#00000005}
    .dot{height:20px;width:20px;border-radius:999px;border:1px solid #00000033;background:transparent;pointer-events:none}
    .txt{flex:1;font-size:15px;transition:color .35s ease,opacity .35s ease}
    .item.done .txt{color:#6b7280;opacity:.9;text-decoration:line-through}
    .item.done .dot{background:#22c55e;border-color:#22c55e}
    .trash{background:transparent;border:1px solid #00000022;color:#0b0b0b;border-radius:8px;padding:6px 8px;cursor:pointer;opacity:.9;display:flex;align-items:center;justify-content:center;min-width:36px}
    .trash:hover{opacity:1}
    .new{animation:pop .35s ease-out both}
    @keyframes pop{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
  </style>
</head>
<body>
  <div class="page">
    <div id="card" class="card panel">
      <div class="header">
        <h1 class="title">My Todo List</h1>
        <p class="sub">Skriv n√•got nedan!.</p>
      </div>

      <div class="row">
        <input id="inp" class="input" placeholder="Vad beh√∂ver g√∂ras?" onkeydown="if(event.key==='Enter') addItem()" />
        <button class="btn" onclick="addItem()">OK</button>
      </div>

      <p id="err" class="error">Du m√•ste skriva n√•got.</p>

      <div class="stats">
        <div>Klarmarkeringar: <b id="doneCount">0</b></div>
        <div>Kvar: <b id="leftCount">0</b></div>
        <button class="clear" onclick="clearAll()">Rensa alla</button>
      </div>

      <ul id="list" class="list"></ul>
    </div>
  </div>

  <script>
    var todos = [];
    var doneOnlyUp = 0;
    var card = document.getElementById('card');
    var inp = document.getElementById('inp');
    var list = document.getElementById('list');
    var err = document.getElementById('err');
    var doneCount = document.getElementById('doneCount');
    var leftCount = document.getElementById('leftCount');

    setTimeout(function(){ card.classList.add('show'); inp.focus(); updateCounts(); }, 10);

    function updateCounts(){
      var left = 0;
      for(var i=0;i<todos.length;i++){ if(!todos[i].done) left++; }
      leftCount.textContent = left;
      doneCount.textContent = doneOnlyUp;
    }

    function addItem(){
      var t = (inp.value||'').trim();
      if(!t){
        err.classList.add('show');
        inp.classList.add('blink');
        setTimeout(function(){ inp.classList.remove('blink'); }, 500);
        return;
      }
      err.classList.remove('show');

      var id = Math.random().toString(36).slice(2)+Date.now().toString(36);
      var item = { id:id, text:t, done:false };
      todos.unshift(item);

      var li = document.createElement('li');
      li.className = 'item new';
      li.setAttribute('data-id', id);

      var d = document.createElement('div');
      d.className = 'dot';
      li.appendChild(d);

      var tx = document.createElement('div');
      tx.className = 'txt';
      tx.textContent = t;
      li.appendChild(tx);

      var del = document.createElement('button');
      del.className = 'trash';
      del.type = 'button';
      del.textContent = 'üóëÔ∏è';
      li.appendChild(del);

      li.onclick = function(e){
        if(e.target === del) return;
        for(var i=0;i<todos.length;i++){
          if(todos[i].id===id){
            var was = todos[i].done;
            todos[i].done = !todos[i].done;
            if(!was && todos[i].done){ doneOnlyUp++; }
            break;
          }
        }
        rebuildList();
        updateCounts();
      };

      del.onclick = function(){
        var tmp = [];
        for(var i=0;i<todos.length;i++){ if(todos[i].id!==id) tmp.push(todos[i]); }
        todos = tmp;
        rebuildList();
        updateCounts();
      };

      list.insertBefore(li, list.firstChild);
      setTimeout(function(){ li.classList.remove('new'); }, 400);
      inp.value = '';
      inp.focus();
      updateCounts();
    }

    function rebuildList(){
      while(list.firstChild){ list.removeChild(list.firstChild); }
      for(var i=0;i<todos.length;i++){
        var it = todos[i];
        var li = document.createElement('li');
        li.className = 'item' + (it.done ? ' done' : '');
        li.setAttribute('data-id', it.id);

        var d = document.createElement('div');
        d.className = 'dot';
        li.appendChild(d);

        var tx = document.createElement('div');
        tx.className = 'txt';
        tx.textContent = it.text;
        li.appendChild(tx);

        var del = document.createElement('button');
        del.className = 'trash';
        del.type = 'button';
        del.textContent = 'üóëÔ∏è';
        li.appendChild(del);

        (function(storeId){
          li.onclick = function(e){
            if(e.target === del) return;
            for(var k=0;k<todos.length;k++){
              if(todos[k].id===storeId){
                var was = todos[k].done;
                todos[k].done = !todos[k].done;
                if(!was && todos[k].done){ doneOnlyUp++; }
                break;
              }
            }
            rebuildList();
            updateCounts();
          };
          del.onclick = function(){
            var next = [];
            for(var m=0;m<todos.length;m++){ if(todos[m].id!==storeId) next.push(todos[m]); }
            todos = next;
            rebuildList();
            updateCounts();
          };
        })(it.id);

        list.appendChild(li);
      }
    }

    function clearAll(){
      todos = [];
      rebuildList();
      updateCounts();
    }
  </script>
</body>
</html>
